<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Registro Spese</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- PWA Manifest e Theme Color -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#198754">

<style>
body { background: #f1f3f6; font-size: 1.1rem; }
.app-card { border-radius: 18px; margin-top: 1rem; }
label { font-weight: 600; margin-bottom: 0.3rem; }
.form-control, .form-select { min-height: 52px; font-size: 1.05rem; border-radius: 14px; }
.btn-save { position: sticky; bottom: 0; width: 100%; border-radius: 0; font-size: 1.2rem; padding: 14px; }
.alert { border-radius: 14px; }
.list-group-item:active { opacity: 0.8; }
</style>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js')
    .then(() => console.log("Service Worker registrato"))
    .catch(err => console.log("Service Worker fallito", err));
}
</script>
</head>

<body>
<div class="container-fluid px-3 pb-5">
  <div class="card app-card shadow-sm">
    <div class="card-body">
      <h4 class="text-center mb-3">ğŸ’° Nuova Spesa</h4>

      <form id="spesaForm">
        <div class="mb-3">
          <label>ğŸ“… Data</label>
          <input type="date" id="data" class="form-control" required>
        </div>

        <div class="mb-3">
          <label>â¬†ï¸ Entrata</label>
          <select id="entrata" class="form-select">
            <option value="">Nessuna</option>
            <option>Stipendio</option>
            <option>Altre Entrate</option>
          </select>
        </div>

        <div class="mb-3">
          <label>â¬‡ï¸ Uscita</label>
          <select id="uscita" class="form-select">
            <option value="">Nessuna</option>
            <option>Abbigliamento</option>
            <option>Auto Altre Spese</option>
            <option>Auto Assicurazione</option>
            <option>Auto Benzina</option>
            <option>Auto Bollo</option>
            <option>Auto GPL</option>
            <option>Auto Pedaggi</option>
            <option>Bollette Fibra</option>
            <option>Bollette GAS</option>
            <option>Bollette Luce</option>
            <option>Bollette SIM</option>
            <option>Bollette Spazzatura</option>
            <option>Bollette TV Online</option>
            <option>Casa</option>
            <option>Lavoro Altro</option>
            <option>Lavoro Pranzo</option>
            <option>Lavanderia</option>
            <option>Luisanna</option>
            <option>Mutuo</option>
            <option>Salute</option>
            <option>Spesa Alimentari</option>
            <option>Spese Straordinarie</option>
            <option>Trasporti Altre Spese</option>
            <option>Trasporti Roma</option>
            <option>Uscite</option>
            <option>Vacanza</option>
          </select>
        </div>

        <div class="mb-3">
          <label>ğŸ’¶ Importo</label>
          <input type="number" step="0.01" id="importo" class="form-control" required>
        </div>

        <div class="mb-3">
          <label>ğŸ“ Note</label>
          <textarea id="note" rows="2" class="form-control"></textarea>
        </div>
      </form>

      <div id="messaggio" class="alert alert-success text-center d-none mt-3"></div>

      <hr class="my-4">
      <h5 class="text-center mb-3">ğŸ“‹ Ultime Spese</h5>
      <div id="listaSpese" class="list-group"></div>
      <hr class="my-3">
      <div id="riepilogoMensile" class="text-center p-2 rounded-3 shadow-sm mb-3">
        <div>Entrate: <span id="totEntrate">â‚¬ 0.00</span></div>
        <div>Uscite: <span id="totUscite">â‚¬ 0.00</span></div>
        <div>Saldo: <span id="saldoMensile">â‚¬ 0.00</span></div>
      </div>
    </div>
  </div>
</div>

<button class="btn btn-success btn-save" onclick="invia()">ğŸ’¾ Salva</button>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://script.google.com/macros/s/AKfycbxI5gMH6QU__LnT15brQ3vKgGXfHG01e2LsTg1exeUL5jmWDumGombhLRNdwDNN43UZ/exec"></script>
</body>
</html>
